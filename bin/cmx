#!/bin/sh
cmxs='/home/i/comix'
paths='~/ars/media/deuce/pub/comics ~/ars/root/torrents'
cmxtypes='zip\|rar\|cbz\|cbr'

(
    eval "find $paths -type f -iregex \".*\\.\\($cmxtypes\\)\"" | sort -h >> "$cmxs"
    awk '!x[$0]++' "$cmxs" > "$cmxs.tmp" && mv "$cmxs.tmp" "$cmxs"
)&

cmx=$(slmenu -i -l 20 < "$cmxs")

if [ -f "$cmx" ]; then
    comix -f "$cmx"
    sed -i "1s#^#$cmx\n#" "$cmxs"
fi

exit 0
