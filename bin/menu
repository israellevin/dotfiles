#!/bin/sh
[ "$TMUX" ] && exec fzf-tmux "$@"

tmpdir=$(mktemp -dt menu.XXXXXX)
trap 'rm -rf "$tmpdir"' EXIT

infifo="$tmpdir/in"
outfifo="$tmpdir/out"
mkfifo "$infifo" "$outfifo"

cat "$outfifo" &
foot -a menu_run sh -c "fzf $* < '$infifo' > '$outfifo'" &
cat - > "$infifo"
