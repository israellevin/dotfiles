#!/bin/bash
vids='/home/i/vids'
paths="~/ars/media/deuce/pub/{audio,cinema,television,video,kids} ~/ars/root/torrents"
vidtypes='3g\|asf\|asx\|avi\|bin\|divx\|dvx\|f4v\|flc\|flv\|gvi\|m4v\|mkv\|mov\|mp4\|mpeg\|mpg\|ogm\|qt\|rm\|swf\|vid\|wmv\|xvid'

(
    eval "find $paths -type f -iregex \".*\\.\\($vidtypes\\)\"" | sort -h >> "$vids"
    awk '!x[$0]++' "$vids" > "$vids.tmp" && mv "$vids.tmp" "$vids"
)&

vid="$(slmenu -i -l 20 < "$vids")"
if [ -f "$vid" ]; then
    TMUX='' tmux new-session -d "DISPLAY=:0 mpv \"$vid\"" &
    sed -i "1s#^#$vid\n#" "$vids"
fi

exit 0
